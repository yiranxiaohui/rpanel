syntax = "proto3";

package bridge;

service BridgeService {
  rpc Exchange(stream Frame) returns (stream Frame);
}


message Frame {
  string request_id = 1;
  string agent_id = 2;
  oneof body {
    CallRequest call = 3;
    CallResponse resp = 4;
    Heartbeat hb = 5;
  }
}

message CallRequest {
  string method = 1;
  bytes  payload = 2;
}

message CallResponse {
  int32  code = 1;
  string message = 2;
  bytes  payload = 3;
}

message Heartbeat {
  int64 ts = 1; // unix timestamp in milliseconds
}