syntax = "proto3";
package docker;

service Greeter {
  rpc Exec (stream DockerRequest) returns (stream DockerReply);
}

message DockerRequest {
  Action action = 1;
  string agent_id = 2;
  oneof payload {
      PullImageRequest pull_image_request = 3;
      CreateContainerRequest create_container_request = 4;
  }
}

message PullImageRequest {
  optional string status = 1;
  optional string progress = 2;
}

message CreateContainerRequest {

}

message DockerReply {
  Action action = 1;
  oneof payload {
    Container container = 2;
    Image image = 3;
    Agent agent = 4;
  }
}

message Agent {
  string id = 1;
}

message Container {
  
}

message Image {
  string name = 1;
}

enum Action {
  UploadStatus = 0;
  UpLine = 1;
  CreateContainer = 2;
  PullImage = 3;
}